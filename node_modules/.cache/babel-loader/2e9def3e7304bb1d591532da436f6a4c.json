{"ast":null,"code":"import VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport Draw from 'ol/interaction/Draw';\nimport Style from 'ol/style/Style';\nimport Fill from 'ol/style/Fill';\nimport Stroke from 'ol/style/Stroke';\nimport Circle from 'ol/style/Circle';\nexport default {\n  name: 'draw',\n  getReducer: () => {\n    const initialData = {\n      layer: null,\n      shouldInitalize: false,\n      drawPoints: null,\n      drawLines: null,\n      drawPolygons: null,\n      activeInteraction: null\n    };\n    return (state = initialData, {\n      type,\n      payload\n    }) => {\n      switch (type) {\n        case 'DRAW_INITIALIZE_STARTED':\n        case 'DRAW_INITIALIZE_FINISHED':\n        case 'DRAW_ADD_INTERACTION':\n          return Object.assign({}, state, payload);\n\n        case \"MAP_INITIALIZED\":\n          return Object.assign({}, state, {\n            shouldInitalize: true\n          });\n\n        default:\n          return state;\n      }\n    };\n  },\n  doDrawInitializeLayer: () => ({\n    dispatch,\n    store\n  }) => {\n    dispatch({\n      type: 'DRAW_INITIALIZE_STARTED',\n      payload: {\n        shouldInitalize: false\n      }\n    });\n    const map = store.selectMap();\n    const source = new VectorSource();\n    const layer = new VectorLayer({\n      source: source,\n      style: new Style({\n        fill: new Fill({\n          color: \"rgba( \".concat(Math.random() * 255, \", \").concat(Math.random() * 255, \",\").concat(Math.random() * 255, \",.5)\")\n        }),\n        stroke: new Stroke({\n          width: 3,\n          color: \"rgba( \".concat(Math.random() * 255, \", \").concat(Math.random() * 255, \",\").concat(Math.random() * 255, \",.9)\")\n        }),\n        image: new Circle({\n          radius: 7,\n          fill: new Fill({\n            color: \"rgba( \".concat(Math.random() * 255, \", \").concat(Math.random() * 255, \",\").concat(Math.random() * 255, \",.5)\")\n          }),\n          stroke: new Stroke({\n            width: 3,\n            color: \"rgba( \".concat(Math.random() * 255, \", \").concat(Math.random() * 255, \",\").concat(Math.random() * 255, \",.9)\")\n          })\n        })\n      })\n    });\n    const drawPoints = new Draw({\n      source: source,\n      type: 'Point'\n    });\n    const drawLines = new Draw({\n      source: source,\n      type: 'LineString'\n    });\n    const drawPolygons = new Draw({\n      source: source,\n      type: 'Polygon'\n    });\n    map.addLayer(layer);\n    dispatch({\n      type: 'DRAW_INITIALIZE_FINISHED',\n      payload: {\n        layer: layer,\n        drawPoints: drawPoints,\n        drawLines: drawLines,\n        drawPolygons: drawPolygons\n      }\n    });\n  },\n  doDrawAddInteraction: interaction => ({\n    dispatch,\n    store\n  }) => {\n    const map = store.selectMap();\n    const activeInteraction = store.selectDrawActiveInteraction();\n    let newInteraction = null;\n    map.removeInteraction(activeInteraction);\n\n    if (interaction !== activeInteraction) {\n      map.addInteraction(interaction);\n      newInteraction = interaction;\n    }\n\n    dispatch({\n      type: 'DRAW_ADD_INTERACTION',\n      payload: {\n        activeInteraction: newInteraction\n      }\n    });\n  },\n  selectDrawLayer: state => {\n    return state.draw.layer;\n  },\n  selectDrawPoints: state => {\n    return state.draw.drawPoints;\n  },\n  selectDrawLines: state => {\n    return state.draw.drawLines;\n  },\n  selectDrawPolygons: state => {\n    return state.draw.drawPolygons;\n  },\n  selectDrawActiveInteraction: state => {\n    return state.draw.activeInteraction;\n  },\n  reactDrawShouldInitialize: state => {\n    if (state.draw.shouldInitalize) return {\n      actionCreator: 'doDrawInitializeLayer'\n    };\n  }\n};","map":{"version":3,"sources":["C:\\Examples\\sharemap\\src\\app-bundles\\draw-bundle.js"],"names":["VectorLayer","VectorSource","Draw","Style","Fill","Stroke","Circle","name","getReducer","initialData","layer","shouldInitalize","drawPoints","drawLines","drawPolygons","activeInteraction","state","type","payload","Object","assign","doDrawInitializeLayer","dispatch","store","map","selectMap","source","style","fill","color","Math","random","stroke","width","image","radius","addLayer","doDrawAddInteraction","interaction","selectDrawActiveInteraction","newInteraction","removeInteraction","addInteraction","selectDrawLayer","draw","selectDrawPoints","selectDrawLines","selectDrawPolygons","reactDrawShouldInitialize","actionCreator"],"mappings":"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","sourcesContent":["import VectorLayer from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Draw from 'ol/interaction/Draw';\r\nimport Style from 'ol/style/Style';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\nimport Circle from 'ol/style/Circle';\r\n\r\nexport default {\r\n    name: 'draw',\r\n    getReducer:() =>{\r\n        const initialData = {\r\n            layer: null,\r\n            shouldInitalize: false,\r\n            drawPoints: null,\r\n            drawLines: null,\r\n            drawPolygons: null,\r\n            activeInteraction: null\r\n        }\r\n        return (state = initialData, {type, payload}) => {\r\n            switch(type){\r\n                case 'DRAW_INITIALIZE_STARTED':\r\n                case  'DRAW_INITIALIZE_FINISHED':\r\n                case  'DRAW_ADD_INTERACTION':\r\n                    return Object.assign({}, state, payload);\r\n                case \"MAP_INITIALIZED\":\r\n                    return Object.assign({}, state, {\r\n                        shouldInitalize: true\r\n                    });\r\n                default:\r\n                    return state;\r\n            }\r\n        }\r\n    },\r\n    doDrawInitializeLayer: () => ({dispatch, store}) => {\r\n        dispatch({type: 'DRAW_INITIALIZE_STARTED', payload: {shouldInitalize: false}})\r\n        const map = store.selectMap();\r\n        const source = new VectorSource();\r\n        const layer = new VectorLayer({\r\n            source: source,\r\n            style: new Style({\r\n                fill: new Fill({\r\n                    color: `rgba( ${Math.random()*255}, ${Math.random()*255},${Math.random()*255},.5)`\r\n                }),\r\n                stroke: new Stroke({\r\n                    width: 3,\r\n                    color: `rgba( ${Math.random()*255}, ${Math.random()*255},${Math.random()*255},.9)`\r\n                }),\r\n                image: new Circle({\r\n                    radius: 7,\r\n                    fill: new Fill({\r\n                        color: `rgba( ${Math.random()*255}, ${Math.random()*255},${Math.random()*255},.5)`\r\n                    }),\r\n                    stroke: new Stroke({\r\n                        width: 3,\r\n                        color: `rgba( ${Math.random()*255}, ${Math.random()*255},${Math.random()*255},.9)`\r\n                    })\r\n                })\r\n            })\r\n        })\r\n        const drawPoints = new Draw({\r\n            source: source,\r\n            type: 'Point'\r\n        })\r\n        const drawLines = new Draw({\r\n            source: source,\r\n            type: 'LineString'\r\n        })\r\n        const drawPolygons = new Draw({\r\n            source: source,\r\n            type: 'Polygon'\r\n        })\r\n        map.addLayer(layer);\r\n        dispatch({\r\n            type: 'DRAW_INITIALIZE_FINISHED',\r\n            payload:{\r\n                layer: layer,\r\n                drawPoints: drawPoints,\r\n                drawLines: drawLines,\r\n                drawPolygons: drawPolygons\r\n            }\r\n        })\r\n    },\r\n    doDrawAddInteraction: (interaction) => ({dispatch, store}) =>{\r\n        const map = store.selectMap();\r\n        const activeInteraction = store.selectDrawActiveInteraction();\r\n        let newInteraction = null;\r\n        map.removeInteraction(activeInteraction)\r\n        if(interaction!==activeInteraction){\r\n            map.addInteraction(interaction);\r\n            newInteraction = interaction;\r\n        } \r\n        dispatch({\r\n            type: 'DRAW_ADD_INTERACTION',\r\n            payload:{\r\n                activeInteraction: newInteraction\r\n            }\r\n        })\r\n    },\r\n    selectDrawLayer: (state) => {\r\n        return state.draw.layer;\r\n    },\r\n    selectDrawPoints: (state) => {\r\n        return state.draw.drawPoints;\r\n    },\r\n    selectDrawLines: (state) => {\r\n        return state.draw.drawLines;\r\n    },\r\n    selectDrawPolygons: (state) => {\r\n        return state.draw.drawPolygons;\r\n    },\r\n    selectDrawActiveInteraction: (state) => {\r\n        return state.draw.activeInteraction;\r\n    },\r\n    reactDrawShouldInitialize: (state) => {\r\n        if(state.draw.shouldInitalize) return { actionCreator: 'doDrawInitializeLayer'}\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}