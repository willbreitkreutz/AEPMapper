{"ast":null,"code":"import VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport Select from 'ol/interaction/Select';\nimport Style from 'ol/style/Style';\nimport Fill from 'ol/style/Fill';\nimport Stroke from 'ol/style/Stroke';\nexport default {\n  name: 'draw',\n  getReducer: () => {\n    const initialData = {\n      layer: null,\n      shouldInitalize: false,\n      select: null,\n      download: null,\n      fillColor: \"rgba(120, 194, 173, .5)\",\n      //rgba(243, 150, 154, .5)`,//green,pink (from minty color scheme)\n      strokeColor: \"rgba(120, 194, 173, .9)\",\n      //rgba(243, 150, 154, .9)`,\n      strokeWidth: 3,\n      activeInteraction: null\n    };\n    return (state = initialData, {\n      type,\n      payload\n    }) => {\n      switch (type) {\n        case 'DRAW_INITIALIZE_STARTED':\n        case 'DRAW_INITIALIZE_FINISHED':\n        case 'DRAW_ADD_INTERACTION':\n          return Object.assign({}, state, payload);\n\n        case \"MAP_INITIALIZED\":\n          return Object.assign({}, state, {\n            shouldInitalize: true\n          });\n\n        default:\n          return state;\n      }\n    };\n  },\n  doDrawInitializeLayer: () => ({\n    dispatch,\n    store\n  }) => {\n    dispatch({\n      type: 'DRAW_INITIALIZE_STARTED',\n      payload: {\n        shouldInitalize: false\n      }\n    });\n    const map = store.selectMap();\n    const styleSettings = store.selectDrawStyleSettings();\n    const source = new VectorSource();\n    const layer = new VectorLayer({\n      source: source,\n      zIndex: 10,\n      style: new Style({\n        fill: new Fill({\n          color: styleSettings.fillColor\n        }),\n        stroke: new Stroke({\n          width: styleSettings.strokeWidth,\n          color: styleSettings.strokeColor\n        })\n      })\n    });\n    const select = new Select({\n      layers: [layer]\n    });\n    map.addLayer(layer);\n    dispatch({\n      type: 'DRAW_INITIALIZE_FINISHED',\n      payload: {\n        layer: layer,\n        select: select\n      }\n    });\n  },\n  selectDrawLayer: state => {\n    return state.draw.layer;\n  },\n  selectDrawPolygons: state => {\n    return state.draw.drawPolygons;\n  },\n  selectModify: state => {\n    return state.draw.modify;\n  },\n  selectDrawSelect: state => {\n    return state.draw.select;\n  },\n  selectDrawDownload: state => {\n    return state.draw.download;\n  },\n  selectDrawActiveInteraction: state => {\n    return state.draw.activeInteraction;\n  },\n  selectDrawStyleSettings: state => {\n    return {\n      fillColor: state.draw.fillColor,\n      strokeColor: state.draw.strokeColor,\n      strokeWidth: state.draw.strokeWidth\n    };\n  },\n  reactDrawShouldInitialize: state => {\n    if (state.draw.shouldInitalize) return {\n      actionCreator: 'doDrawInitializeLayer'\n    };\n  },\n  init: store => {\n    window.addEventListener('keyup', e => {\n      if (e.keyCode === 8 || e.keyCode === 46) {\n        store.doDrawDeleteSelectedFeatures();\n      }\n    });\n  }\n};","map":{"version":3,"sources":["C:\\Examples\\aepmapper\\src\\app-bundles\\draw-bundle.js"],"names":["VectorLayer","VectorSource","Select","Style","Fill","Stroke","name","getReducer","initialData","layer","shouldInitalize","select","download","fillColor","strokeColor","strokeWidth","activeInteraction","state","type","payload","Object","assign","doDrawInitializeLayer","dispatch","store","map","selectMap","styleSettings","selectDrawStyleSettings","source","zIndex","style","fill","color","stroke","width","layers","addLayer","selectDrawLayer","draw","selectDrawPolygons","drawPolygons","selectModify","modify","selectDrawSelect","selectDrawDownload","selectDrawActiveInteraction","reactDrawShouldInitialize","actionCreator","init","window","addEventListener","e","keyCode","doDrawDeleteSelectedFeatures"],"mappings":"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","sourcesContent":["import VectorLayer from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Select from 'ol/interaction/Select';\r\nimport Style from 'ol/style/Style';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\n\r\nexport default {\r\n    name: 'draw',\r\n    getReducer:() =>{\r\n        const initialData = {\r\n            layer: null,\r\n            shouldInitalize: false,\r\n            select:null,\r\n            download: null,\r\n            fillColor:`rgba(120, 194, 173, .5)`,//rgba(243, 150, 154, .5)`,//green,pink (from minty color scheme)\r\n            strokeColor:`rgba(120, 194, 173, .9)`,//rgba(243, 150, 154, .9)`,\r\n            strokeWidth:3,\r\n            activeInteraction: null\r\n        }\r\n        return (state = initialData, {type, payload}) => {\r\n            switch(type){\r\n                case 'DRAW_INITIALIZE_STARTED':\r\n                case 'DRAW_INITIALIZE_FINISHED':\r\n                case 'DRAW_ADD_INTERACTION':\r\n                    return Object.assign({}, state, payload);\r\n                case \"MAP_INITIALIZED\":\r\n                    return Object.assign({}, state, {\r\n                        shouldInitalize: true\r\n                    });\r\n                default:\r\n                    return state;\r\n            }\r\n        }\r\n    },\r\n    doDrawInitializeLayer: () => ({dispatch, store}) => {\r\n        dispatch({type: 'DRAW_INITIALIZE_STARTED', payload: {shouldInitalize: false}})\r\n        const map = store.selectMap();\r\n        const styleSettings = store.selectDrawStyleSettings();\r\n        const source = new VectorSource();\r\n        const layer = new VectorLayer({\r\n            source: source,\r\n            zIndex: 10,\r\n            style: new Style({\r\n                fill: new Fill({\r\n                    color: styleSettings.fillColor\r\n                }),\r\n                stroke: new Stroke({\r\n                    width: styleSettings.strokeWidth,\r\n                    color: styleSettings.strokeColor\r\n                })\r\n            })\r\n        })\r\n        const select = new Select({\r\n            layers: [layer]\r\n        })\r\n        map.addLayer(layer);\r\n        dispatch({\r\n            type: 'DRAW_INITIALIZE_FINISHED',\r\n            payload:{\r\n                layer: layer,\r\n                select: select\r\n            }\r\n        })\r\n    },\r\n    selectDrawLayer: (state) => {\r\n        return state.draw.layer;\r\n    },\r\n    selectDrawPolygons: (state) =>{\r\n        return state.draw.drawPolygons;\r\n    },\r\n    selectModify: (state) => {\r\n        return state.draw.modify;\r\n    },\r\n    selectDrawSelect: (state) => {\r\n        return state.draw.select;\r\n    },\r\n    selectDrawDownload:(state) =>{\r\n        return state.draw.download;\r\n    },\r\n    selectDrawActiveInteraction: (state) => {\r\n        return state.draw.activeInteraction;\r\n    },\r\n    selectDrawStyleSettings:(state) =>{\r\n        return {\r\n            fillColor: state.draw.fillColor,\r\n            strokeColor: state.draw.strokeColor,\r\n            strokeWidth:state.draw.strokeWidth,\r\n        }\r\n\r\n    },\r\n    reactDrawShouldInitialize: (state) => {\r\n        if(state.draw.shouldInitalize) return { actionCreator: 'doDrawInitializeLayer'}\r\n    },\r\n    init: (store) =>{\r\n        window.addEventListener('keyup', (e) =>{\r\n            if(e.keyCode === 8 || e.keyCode === 46){\r\n                store.doDrawDeleteSelectedFeatures();\r\n            }\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}